---
title: "SubtractFunction"
format: html
---


```{r setup, echo=FALSE}
setup_qmd()
```

The `SubtractFunction` is a utility function that returns the difference of values from its child functions.


## Overview

The `SubtractFunction` is used to subtract the values of other child functions from the first child. It calculates the difference between the first child function and the sum of all subsequent child functions. This is useful when you need to compute a value that is derived from subtracting multiple traits or parameters in plant growth models.

## Model Structure

{{< include /_includes/Models/model-structure-intro.md >}}

The `SubtractFunction` inherits from the following classes:

* [Model](/docs/Models/Core/Model.qmd)
* [IFunction](/docs/APSIM.Core/IFunction.qmd)
* [IStructureDependency](/docs/APSIM.Core/IStructureDependency.qmd)


## Connections to Other Components

{{< include /_includes/Models/connections-intro.md >}}

| Component | Model | Connection Type | Description                                          |
|-----------|-------|-----------------|------------------------------------------------------|
| Child Functions | [IFunction](/docs/APSIM.Core/IFunction.qmd) | Children | Multiple child functions whose values are used in the subtraction calculation. |


## Model Variables

{{< include /_includes/Models/model-variables-intro.md >}}


**Configurable and Reportable Properties**

> No configurable properties are available for this function.

**Read-Only Reportable Properties**

| Property             | Type    | Description                                                                 |
|----------------------|---------|-----------------------------------------------------------------------------|
| Value   | double  | The sum of values from all child functions.                      |

## Processes and Algorithms

{{< include /_includes/Models/processes-intro.md >}}

### Subtraction Calculation

The `SubtractFunction` takes the value of the first child function and subtracts the values of all subsequent child functions from it. The calculation follows this pattern:

$$
\text{Result} = f_1 - f_2 - f_3 - \ldots - f_n
$$

where $f_1, f_2, \ldots, f_n$ are the values returned by the child functions.

The algorithm operates as follows:

1. If no child functions are present, the function returns 0.0
2. If only one child function exists, it returns that function's value
3. If multiple child functions exist, it starts with the first child's value and sequentially subtracts each subsequent child's value

This sequential subtraction ensures that the operation is equivalent to:

$$
\text{Result} = f_1 - (f_2 + f_3 + \ldots + f_n)
$$


## User Interface

`SubtractFunction` can be added as a child of any node that accepts function inputs in the model tree. Right-click the parent node, select "Add Model...", and search for `SubtractFunction` in the Filter Box. A symbol for the `SubtractFunction` is displayed in the user interface to represent the function.

![](https://github.com/APSIMInitiative/ApsimX/raw/master/ApsimNG/Resources/TreeViewImages/SubtractFunction.png){ width=64px }


## Practical Example

The wheat yield is reduced by frost stress as a ratio of total yield (e.g. `FrostDamage`). The final yield is calculated by subtracting the frost damage from the total potential yield.

$$
\text{FinalYield} = \text{TotalPotentialYield} \times (1 - \text{FrostDamage})
$$

The `SubtractFunction` is used to subtract these two values to get the final yield in the equation above.


## See Also

* **Source code:** [SubtractFunction.cs on GitHub](http://github.com/APSIMInitiative/ApsimX/blob/master/Models/Functions/SubtractFunction.cs)
